<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meine Mineraliensammlung</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üî¨ Meine Mineraliensammlung</h1>
            
            <nav>
                <button onclick="showPage('home')" class="nav-btn active" id="home-btn">Startseite</button>
                <button onclick="showPage('collection')" class="nav-btn" id="collection-btn">Sammlung</button>
                <button onclick="showPage('vitrines')" class="nav-btn" id="vitrines-btn">Vitrinen</button>
                <button onclick="showPage('admin')" class="nav-btn" id="admin-btn">Admin-Panel</button>
            </nav>
        </header>

        <div id="errorContainer"></div>

        <div id="home" class="page active">
            <div class="welcome-content">
                <h2>Willkommen in meiner Mineralwelt</h2>
                <p>Tauchen Sie ein in die faszinierende Welt der Mineralien und Gesteine. Diese Sammlung ist eine Private Sammlung, von gl√§nzenden Kristallen bis hin zu seltenen geologischen Formationen.</p>
                <p>Nutzen Sie die Such- und Filterfunktionen, um gezielt nach bestimmten Mineralien zu suchen, oder lassen Sie sich von der Vielfalt der Sammlung inspirieren.</p>
            </div>
            
            <div id="statsContainer" class="stats-grid">
                <!-- Statistiken werden hier eingef√ºgt -->
            </div>
            
            <div class="features">
                <div class="feature">
                    <h3>üîç Intelligente Suche</h3>
                    <p>Suchen Sie nach Namen oder Steinnummer - das System erkennt automatisch was Sie suchen.</p>
                </div>
                <div class="feature">
                    <h3>üé® Intelligente Filter</h3>
                    <p>Filtern Sie nach Farbe, Fundort, Kaufort, Gesteinsart oder Regalposition.</p>
                </div>
                <div class="feature">
                    <h3>üìã Detaillierte Informationen</h3>
                    <p>Erhalten Sie umfassende Informationen zu jedem Mineral in der Sammlung.</p>
                </div>
                <!-- <div class="feature">
                    <h3>‚ö° Raspberry Pi Integration</h3>
                    <p>Optimiert f√ºr den Betrieb auf Ihrem Raspberry Pi mit lokaler Datenbank.</p>
                </div> -->
            </div>
        </div>

        <div id="collection" class="page">
            <div class="search-filter-container">
                <div class="search-section">
                    <h3>üîç Suche</h3>
                    <input type="text" id="searchField" class="search-input" placeholder="Nach Name oder Steinnummer suchen..." onkeyup="applyFiltersAndSort()">
                </div>
                
                <div class="filter-section">
                    <h3>üéØ Filter</h3>
                    <select id="colorFilter" class="filter-select" onchange="applyFiltersAndSort()">
                        <option value="">Alle Farben</option>
                    </select>
                    <select id="locationFilter" class="filter-select" onchange="applyFiltersAndSort()">
                        <option value="">Alle Fundorte</option>
                    </select>
                    <select id="rockTypeFilter" class="filter-select" onchange="applyFiltersAndSort()">
                        <option value="">Alle Gesteinsarten</option>
                    </select>
                </div>
            </div>

            <!-- Filter-Info Anzeige -->
            <div id="filterInfo" class="filter-info">
                <strong>Aktive Filter:</strong>
                <span id="filterTags"></span>
                <button class="clear-filters" onclick="clearAllFilters()">Alle Filter l√∂schen</button>
            </div>

            <div class="sort-section">
                <label for="sortBy">Sortieren nach: </label>
                <select id="sortBy" onchange="applyFiltersAndSort()">
                    <option value="name">Alphabet (Name)</option>
                    <option value="number">Steinnummer</option>
                    <option value="color">Farbe</option>
                </select>
            </div>

            <div id="mineralsGrid" class="minerals-grid">
                <div class="loading">Lade Mineralien...</div>
            </div>
        </div>

        <div id="admin" class="page">
            <h2>Admin-Panel</h2>
            <!-- <p>Hier k√∂nnen Sie neue Mineralien zu Ihrer Sammlung hinzuf√ºgen:</p> -->
            
            <form class="admin-form" onsubmit="addMineral(event)">
                <input type="text" id="mineralName" placeholder="Name des Minerals" required>
                <input type="text" id="mineralNumber" placeholder="Nummer des Steins" required>
                <input type="text" id="mineralColor" placeholder="Farbe" required>
                <textarea id="mineralDescription" placeholder="Beschreibung" required></textarea>
                <input type="text" id="mineralLocation" placeholder="Fundort" required>
                <input type="text" id="mineralPurchaseLocation" placeholder="Kaufort" required>
                <select id="mineralRockType" required>
                    <option value="">Gesteinsart ausw√§hlen</option>
                    <option value="magmatisch">Magmatisch</option>
                    <option value="sediment√§r">Sediment√§r</option>
                    <option value="metamorph">Metamorph</option>
                </select>
                <input type="text" id="mineralShelf" placeholder="Regal-Nummer" required>
                
                <div class="file-input-wrapper">
                    <input type="file" id="mineralImage" accept="image/*" onchange="previewImage(event)">
                    <div class="file-input-display">
                        <div id="imagePreview">
                            üì∏ Klicken Sie hier um ein Bild hochzuladen<br>
                            <small>(JPEG, PNG, GIF, WebP - Max. 10MB)</small>
                        </div>
                    </div>
                </div>
                
                <button type="submit" id="submitBtn">Mineral hinzuf√ºgen</button>
            </form>
        </div>

        <!-- Neue Vitrinen-Seite (nach der admin-Seite einf√ºgen): -->
        <div id="vitrines" class="page">
            <div class="vitrines-header">
                <h2>üèõÔ∏è Vitrinen-Verwaltung</h2>
                <button onclick="openAddVitrineModal()" class="btn-add">Neue Vitrine hinzuf√ºgen</button>
            </div>

            <div id="vitrinesGrid" class="vitrines-grid">
                <div class="loading">Lade Vitrinen...</div>
            </div>
        </div>
    </div>

    <!-- Modal f√ºr Mineral-Details -->
    <div id="mineralModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal()">&times;</span>
            <div id="modalContent">
                <!-- Details werden hier eingef√ºgt -->
            </div>
        </div>
    </div>

    <!-- Modal f√ºr Mineral bearbeiten -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeEditModal()">&times;</span>
            <h2>Mineral bearbeiten</h2>
            <form class="edit-form" id="editForm" onsubmit="saveEditedMineral(event)">
                <input type="hidden" id="editMineralId">
                <input type="text" id="editMineralName" placeholder="Name des Minerals" required>
                <input type="text" id="editMineralNumber" placeholder="Nummer des Steins" required>
                <input type="text" id="editMineralColor" placeholder="Farbe" required>
                <textarea id="editMineralDescription" placeholder="Beschreibung" required></textarea>
                <input type="text" id="editMineralLocation" placeholder="Fundort" required>
                <input type="text" id="editMineralPurchaseLocation" placeholder="Kaufort" required>
                <select id="editMineralRockType" required>
                    <option value="">Gesteinsart ausw√§hlen</option>
                    <option value="magmatisch">Magmatisch</option>
                    <option value="sediment√§r">Sediment√§r</option>
                    <option value="metamorph">Metamorph</option>
                </select>
                <input type="text" id="editMineralShelf" placeholder="Regal-Nummer" required>
                
                <div class="file-input-wrapper">
                    <input type="file" id="editMineralImage" accept="image/*" onchange="previewEditImage(event)">
                    <div class="file-input-display">
                        <div id="editImagePreview">
                            üì∏ Neues Bild hochladen (optional)<br>
                            <small>(JPEG, PNG, GIF, WebP - Max. 10MB)</small>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button type="submit" class="btn-save" id="saveBtn">√Ñnderungen speichern</button>
                    <button type="button" class="btn-cancel" onclick="closeEditModal()">Abbrechen</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal f√ºr neue Vitrine hinzuf√ºgen (nach editModal einf√ºgen): -->
    <div id="addVitrineModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeAddVitrineModal()">&times;</span>
            <h2>Neue Vitrine hinzuf√ºgen</h2>
            <form class="vitrine-form" id="addVitrineForm" onsubmit="addVitrine(event)">
                <input type="text" id="vitrineName" placeholder="Name der Vitrine" required>
                <input type="text" id="vitrineCode" placeholder="Vitrine-Code (z.B. V01)" pattern="V\d+" required>
                <input type="text" id="vitrineLocation" placeholder="Standort der Vitrine" required>
                <textarea id="vitrineDescription" placeholder="Beschreibung" required></textarea>
                
                <div class="file-input-wrapper">
                    <input type="file" id="vitrineImage" accept="image/*" onchange="previewVitrineImage(event)">
                    <div class="file-input-display">
                        <div id="vitrineImagePreview">
                            üèõÔ∏è Foto der Vitrine hochladen (optional)<br>
                            <small>(JPEG, PNG, GIF, WebP - Max. 10MB)</small>
                        </div>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-save" id="addVitrineBtn">Vitrine hinzuf√ºgen</button>
                    <button type="button" class="btn-cancel" onclick="closeAddVitrineModal()">Abbrechen</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal f√ºr Vitrine bearbeiten: -->
    <div id="editVitrineModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeEditVitrineModal()">&times;</span>
            <h2>Vitrine bearbeiten</h2>
            <form class="vitrine-form" id="editVitrineForm" onsubmit="saveEditedVitrine(event)">
                <input type="hidden" id="editVitrineId">
                <input type="text" id="editVitrineName" placeholder="Name der Vitrine" required>
                <input type="text" id="editVitrineCode" placeholder="Vitrine-Code (z.B. V01)" pattern="V\d+" required>
                <input type="text" id="editVitrineLocation" placeholder="Standort der Vitrine" required>
                <textarea id="editVitrineDescription" placeholder="Beschreibung" required></textarea>
                
                <div class="file-input-wrapper">
                    <input type="file" id="editVitrineImage" accept="image/*" onchange="previewEditVitrineImage(event)">
                    <div class="file-input-display">
                        <div id="editVitrineImagePreview">
                            üèõÔ∏è Neues Foto hochladen (optional)<br>
                            <small>(JPEG, PNG, GIF, WebP - Max. 10MB)</small>
                        </div>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-save" id="saveVitrineBtn">√Ñnderungen speichern</button>
                    <button type="button" class="btn-cancel" onclick="closeEditVitrineModal()">Abbrechen</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal f√ºr Vitrine-Details mit Regalen: -->
    <div id="vitrineDetailModal" class="modal">
        <div class="modal-content large">
            <span class="close-button" onclick="closeVitrineDetailModal()">&times;</span>
            <div id="vitrineDetailContent">
                <!-- Details werden hier eingef√ºgt -->
            </div>
        </div>
    </div>

    <!-- Modal f√ºr neues Regal hinzuf√ºgen: -->
    <div id="addShelfModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeAddShelfModal()">&times;</span>
            <h2>Neues Regal hinzuf√ºgen</h2>
            <form class="shelf-form" id="addShelfForm" onsubmit="addShelf(event)">
                <input type="hidden" id="shelfShowcaseId">
                <input type="text" id="shelfName" placeholder="Name des Regals" required>
                <input type="text" id="shelfCode" placeholder="Regal-Code (z.B. 01)" pattern="\d+" required>
                <textarea id="shelfDescription" placeholder="Beschreibung" required></textarea>
                <input type="number" id="shelfPosition" placeholder="Position (optional)" min="0" value="0">
                
                <div class="file-input-wrapper">
                    <input type="file" id="shelfImage" accept="image/*" onchange="previewShelfImage(event)">
                    <div class="file-input-display">
                        <div id="shelfImagePreview">
                            üìö Foto des Regals hochladen (optional)<br>
                            <small>(JPEG, PNG, GIF, WebP - Max. 10MB)</small>
                        </div>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-save" id="addShelfBtn">Regal hinzuf√ºgen</button>
                    <button type="button" class="btn-cancel" onclick="closeAddShelfModal()">Abbrechen</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal f√ºr Regal bearbeiten: -->
    <div id="editShelfModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeEditShelfModal()">&times;</span>
            <h2>Regal bearbeiten</h2>
            <form class="shelf-form" id="editShelfForm" onsubmit="saveEditedShelf(event)">
                <input type="hidden" id="editShelfId">
                <input type="text" id="editShelfName" placeholder="Name des Regals" required>
                <input type="text" id="editShelfCode" placeholder="Regal-Code (z.B. 01)" pattern="\d+" required>
                <textarea id="editShelfDescription" placeholder="Beschreibung" required></textarea>
                <input type="number" id="editShelfPosition" placeholder="Position" min="0" value="0">
                
                <div class="file-input-wrapper">
                    <input type="file" id="editShelfImage" accept="image/*" onchange="previewEditShelfImage(event)">
                    <div class="file-input-display">
                        <div id="editShelfImagePreview">
                            üìö Neues Foto hochladen (optional)<br>
                            <small>(JPEG, PNG, GIF, WebP - Max. 10MB)</small>
                        </div>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="submit" class="btn-save" id="saveShelfBtn">√Ñnderungen speichern</button>
                    <button type="button" class="btn-cancel" onclick="closeEditShelfModal()">Abbrechen</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal f√ºr Regal-Mineralien anzeigen: -->
    <div id="shelfMineralsModal" class="modal">
        <div class="modal-content large">
            <span class="close-button" onclick="closeShelfMineralsModal()">&times;</span>
            <div id="shelfMineralsContent">
                <!-- Mineralien werden hier eingef√ºgt -->
            </div>
        </div>
    </div>

    <script src="./app.js"></script>
</body>
</html>