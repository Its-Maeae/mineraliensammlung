<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meine Mineraliensammlung</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üî¨ Meine Mineraliensammlung</h1>
            
            <nav>
                <button onclick="showPage('home')" class="nav-btn active" id="home-btn">Startseite</button>
                <button onclick="showPage('collection')" class="nav-btn" id="collection-btn">Sammlung</button>
                <button onclick="showPage('admin')" class="nav-btn" id="admin-btn">Admin-Panel</button>
            </nav>
        </header>

        <div id="errorContainer"></div>

        <div id="home" class="page active">
            <div class="welcome-content">
                <h2>Willkommen in meiner Mineralwelt</h2>
                <p>Tauchen Sie ein in die faszinierende Welt der Mineralien und Gesteine. Diese Sammlung ist die Private Sammlung von Marius Schmieder, von gl√§nzenden Kristallen bis hin zu seltenen geologischen Formationen.</p>
                <p>Nutzen Sie die Such- und Filterfunktionen, um gezielt nach bestimmten Mineralien zu suchen, oder lassen Sie sich von der Vielfalt der Sammlung inspirieren.</p>
            </div>
            
            <div id="statsContainer" class="stats-grid">
                <!-- Statistiken werden hier eingef√ºgt -->
            </div>
            
            <div class="features">
                <div class="feature">
                    <h3>üîç Erweiterte Suche</h3>
                    <p>Suchen Sie nach Namen oder Steinnummer und finden Sie schnell das gew√ºnschte Mineral.</p>
                </div>
                <div class="feature">
                    <h3>üé® Intelligente Filter</h3>
                    <p>Filtern Sie nach Farbe, Fundort, Kaufort, Gesteinsart oder Regalposition.</p>
                </div>
                <div class="feature">
                    <h3>üìã Detaillierte Informationen</h3>
                    <p>Erhalten Sie umfassende Informationen zu jedem Mineral in der Sammlung.</p>
                </div>
                <!-- <div class="feature">
                    <h3>‚ö° Raspberry Pi Integration</h3>
                    <p>Optimiert f√ºr den Betrieb auf Ihrem Raspberry Pi mit lokaler Datenbank.</p>
                </div> -->
            </div>
        </div>

        <div id="collection" class="page">
            <div class="search-filter-container">
                <div class="search-section">
                    <h3>üîç Suche</h3>
                    <input type="text" id="searchName" class="search-input" placeholder="Nach Name suchen..." onkeyup="applyFiltersAndSort()">
                    <input type="text" id="searchNumber" class="search-input" placeholder="Nach Steinnummer suchen..." onkeyup="applyFiltersAndSort()">
                </div>
                
                <div class="filter-section">
                    <h3>üéØ Filter</h3>
                    <select id="colorFilter" class="filter-select" onchange="applyFiltersAndSort()">
                        <option value="">Alle Farben</option>
                    </select>
                    <select id="locationFilter" class="filter-select" onchange="applyFiltersAndSort()">
                        <option value="">Alle Fundorte</option>
                    </select>
                    <select id="rockTypeFilter" class="filter-select" onchange="applyFiltersAndSort()">
                        <option value="">Alle Gesteinsarten</option>
                    </select>
                </div>
            </div>

            <!-- Filter-Info Anzeige -->
            <div id="filterInfo" class="filter-info">
                <strong>Aktive Filter:</strong>
                <span id="filterTags"></span>
                <button class="clear-filters" onclick="clearAllFilters()">Alle Filter l√∂schen</button>
            </div>

            <div class="sort-section">
                <label for="sortBy">Sortieren nach: </label>
                <select id="sortBy" onchange="applyFiltersAndSort()">
                    <option value="name">Alphabet (Name)</option>
                    <option value="number">Steinnummer</option>
                    <option value="color">Farbe</option>
                </select>
            </div>

            <div id="mineralsGrid" class="minerals-grid">
                <div class="loading">Lade Mineralien...</div>
            </div>
        </div>

        <div id="admin" class="page">
            <h2>Admin-Panel</h2>
            <!-- <p>Hier k√∂nnen Sie neue Mineralien zu Ihrer Sammlung hinzuf√ºgen:</p> -->
            
            <form class="admin-form" onsubmit="addMineral(event)">
                <input type="text" id="mineralName" placeholder="Name des Minerals" required>
                <input type="text" id="mineralNumber" placeholder="Nummer des Steins" required>
                <input type="text" id="mineralColor" placeholder="Farbe" required>
                <textarea id="mineralDescription" placeholder="Beschreibung" required></textarea>
                <input type="text" id="mineralLocation" placeholder="Fundort" required>
                <input type="text" id="mineralPurchaseLocation" placeholder="Kaufort" required>
                <select id="mineralRockType" required>
                    <option value="">Gesteinsart ausw√§hlen</option>
                    <option value="magmatisch">Magmatisch</option>
                    <option value="sediment√§r">Sediment√§r</option>
                    <option value="metamorph">Metamorph</option>
                </select>
                <input type="text" id="mineralShelf" placeholder="Regal-Nummer" required>
                
                <div class="file-input-wrapper">
                    <input type="file" id="mineralImage" accept="image/*" onchange="previewImage(event)">
                    <div class="file-input-display">
                        <div id="imagePreview">
                            üì∏ Klicken Sie hier um ein Bild hochzuladen<br>
                            <small>(JPEG, PNG, GIF, WebP - Max. 10MB)</small>
                        </div>
                    </div>
                </div>
                
                <button type="submit" id="submitBtn">Mineral hinzuf√ºgen</button>
            </form>
        </div>
    </div>

    <!-- Modal f√ºr Mineral-Details -->
    <div id="mineralModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal()">&times;</span>
            <div id="modalContent">
                <!-- Details werden hier eingef√ºgt -->
            </div>
        </div>
    </div>

    <!-- Modal f√ºr Mineral bearbeiten -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeEditModal()">&times;</span>
            <h2>Mineral bearbeiten</h2>
            <form class="edit-form" id="editForm" onsubmit="saveEditedMineral(event)">
                <input type="hidden" id="editMineralId">
                <input type="text" id="editMineralName" placeholder="Name des Minerals" required>
                <input type="text" id="editMineralNumber" placeholder="Nummer des Steins" required>
                <input type="text" id="editMineralColor" placeholder="Farbe" required>
                <textarea id="editMineralDescription" placeholder="Beschreibung" required></textarea>
                <input type="text" id="editMineralLocation" placeholder="Fundort" required>
                <input type="text" id="editMineralPurchaseLocation" placeholder="Kaufort" required>
                <select id="editMineralRockType" required>
                    <option value="">Gesteinsart ausw√§hlen</option>
                    <option value="magmatisch">Magmatisch</option>
                    <option value="sediment√§r">Sediment√§r</option>
                    <option value="metamorph">Metamorph</option>
                </select>
                <input type="text" id="editMineralShelf" placeholder="Regal-Nummer" required>
                
                <div class="file-input-wrapper">
                    <input type="file" id="editMineralImage" accept="image/*" onchange="previewEditImage(event)">
                    <div class="file-input-display">
                        <div id="editImagePreview">
                            üì∏ Neues Bild hochladen (optional)<br>
                            <small>(JPEG, PNG, GIF, WebP - Max. 10MB)</small>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button type="submit" class="btn-save" id="saveBtn">√Ñnderungen speichern</button>
                    <button type="button" class="btn-cancel" onclick="closeEditModal()">Abbrechen</button>
                </div>
            </form>
        </div>
    </div>

    <script src="./app.js"></script>
</body>
</html>